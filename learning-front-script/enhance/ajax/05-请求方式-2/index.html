<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
    <button id="get">get</button>
    <button id="post">post</button>
    <button id="put">put</button>
    <button id="patch">patch</button>
    <button id="delete">delete</button>

    <script>

        var oget = document.querySelector("#get")
        var opost = document.querySelector("#post")
        var oput = document.querySelector("#put")
        var opatch = document.querySelector("#patch")
        var odelete = document.querySelector("#delete")

        oget.onclick = function(){
            // 创建XMLHttpRequest对象
            var xhr = new XMLHttpRequest()
            // 设置链接
            xhr.open("get","http://localhost:3005/users?id=1")
            // 发送请求
            xhr.send()
            // 加载完直接判断
            xhr.onload = function(){
                if(/^2\d{2}$/.test(xhr.status)){
                    console.log(xhr.responseText);
                }else{
                    console.log("error",xhr.responseText);
                }
            }
        }
        opost.onclick = function(){
            var xhr = new XMLHttpRequest()
            xhr.open("POST","http://localhost:3005/users")
     
            // 数据放到send的参数中
            // form编码  name=wangwu&age=100
            // xhr.setRequestHeader("content-type","application/x-www-form-urlencoded")
            // xhr.send(`name=tiechui&age=18`)

            // json格式  {"name":"wangwu","age":100}
            xhr.setRequestHeader("content-type","application/json")
            xhr.send(JSON.stringify({
                name:"zhaoliu",
                age:90
            }))

            xhr.onload = function(){
                if(/^2\d{2}$/.test(xhr.status)){
                    console.log(JSON.parse(xhr.responseText));
                }else{
                    console.log("error",xhr.responseText);
                }
            }
        }

        // 全量更新
        oput.onclick = function(){
            var xhr = new XMLHttpRequest()
            xhr.open("PUT","http://localhost:3005/users/2")
   
            xhr.setRequestHeader("content-type","application/json")
            xhr.send(JSON.stringify({
                "name":"test",
                "age":80
            }))

            xhr.onload = function(){
                if(/^2\d{2}$/.test(xhr.status)){
                    console.log(JSON.parse(xhr.responseText));
                }else{
                    console.log("error",xhr.responseText);
                }
            }
        }

        // 增量更新
        opatch.onclick = function(){
            var xhr = new XMLHttpRequest()
            xhr.open("PATCH","http://localhost:3005/users/2")
   
            xhr.setRequestHeader("content-type","application/json")
            xhr.send(JSON.stringify({
                "name":"test2"
            }))

            xhr.onload = function(){
                if(/^2\d{2}$/.test(xhr.status)){
                    console.log(JSON.parse(xhr.responseText));
                }else{
                    console.log("error",xhr.responseText);
                }
            }
        }

        odelete.onclick = function(){
            
            var xhr = new XMLHttpRequest()
            xhr.open("DELETE","http://localhost:3005/users/2")
   
            xhr.send()
            xhr.onload = function(){
                console.log(222);
                
                if(/^2\d{2}$/.test(xhr.status)){
                    console.log(JSON.parse(xhr.responseText));
                }else{
                    console.log("error",xhr.responseText);
                }
            }
        }


        
    </script>
</body>
</html>