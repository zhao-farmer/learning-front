{"version":3,"file":"requestDomo05.js","sources":["pages/requestDomo02/requestDomo05.vue","D:/soft/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcmVxdWVzdERvbW8wMi9yZXF1ZXN0RG9tbzA1LnZ1ZQ"],"sourcesContent":["<template>\n\t<view class=\"content\">\r\n\t\t<view class=\"layout\">\r\n\t\t\t<view class=\"box\" v-for=\"(item,index) in pets\" :key=\"item.id\">\r\n\t\t\t\t<view class=\"pic\" @click=\"onPreview(index)\">\r\n\t\t\t\t\t<image lazy-load :src=\"item.url\" mode=\"widthFix\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"text\">{{item.width}}x{{item.height}}</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<view class=\"float\">\r\n\t\t\t<view class=\"item\" @click=\"onRefresh\">刷新</view>\r\n\t\t\t<view class=\"item\" @click=\"onTop\">顶部</view>\r\n\t\r\n\t\t</view>\r\n\t</view>\n</template>\n\n<script setup>\r\nimport {ref} from \"vue\"\r\nimport {onReachBottom,onPullDownRefresh} from \"@dcloudio/uni-app\"\r\n\r\nconst pets = ref([])\r\n\r\n// 点击预览\r\nconst onPreview = function (index){\r\n\tlet urls = pets.value.map(item=>item.url)\r\n\tuni.previewImage({\r\n\t\tcurrent:index,\r\n\t\turls\r\n\t})\r\n}\r\n// 点击刷新\r\nconst onRefresh = function(){\r\n\tuni.startPullDownRefresh()\r\n\trestart()\r\n}\r\n\r\n// 点击返回顶部\r\nconst onTop = function(){\r\n\tuni.pageScrollTo({\r\n\t\tscrollTop:0,\r\n\t\tduration:100\r\n\t})\r\n}\r\n\r\n\r\n// 网络请求获取图片\nfunction newwork(){\r\n\tuni.showNavigationBarLoading()\r\n\tuni.request({\r\n\t\turl:\"https://api.thecatapi.com/v1/images/search\",\r\n\t\tdata:{\r\n\t\t\tlimit:10\r\n\t\t}\r\n\t}).then(res=>{\r\n\t\tconsole.log(res.data);\r\n\t\tpets.value = [...pets.value,...res.data]\r\n\t}).catch(err=>{\r\n\t\tuni.showToast({\r\n\t\t\ttitle:\"请求有误，请从新刷新\",\r\n\t\t\ticon:\"none\"\r\n\t\t})\r\n\t}).finally(()=>{\r\n\t\tuni.hideNavigationBarLoading()\r\n\t\tuni.stopPullDownRefresh()\r\n\t})\r\n}\r\n// 触底加载\r\nonReachBottom(()=>{\r\n\tnewwork()\r\n})\r\n// 下拉刷新\r\n// pages.json中 style中必须设置 \"enablePullDownRefresh\": true\r\nonPullDownRefresh(()=>{\r\n\trestart()\r\n})\r\n\r\nfunction restart(){\r\n\tpets.value=[]\r\n\tnewwork()\r\n}\r\n\r\nnewwork()\n</script>\n\n\n<style lang=\"scss\" scoped>\n.content{\r\n\t.layout{\r\n\t\tpadding: 50rpx;\r\n\t\t.box{\r\n\t\t\tmargin-bottom: 50rpx;\r\n\t\t\tbox-shadow: 0 10rpx 40rpx rgba(0, 0, 0, 0.08);\r\n\t\t\tborder-radius: 15rpx;\r\n\t\t\toverflow: hidden;\r\n\t\t\t.pic{\r\n\t\t\t\timage{\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t.text{\r\n\t\t\t\tpadding: 30rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t.float{\r\n\t\tposition: fixed;\r\n\t\tright: 30rpx;\r\n\t\tbottom: 80rpx;\r\n\t\t// 增加安全区域\r\n\t\tpadding-bottom: env(safe-area-inset-bottom);\r\n\t\t.item{\r\n\t\t\twidth: 90rpx;\r\n\t\t\theight: 90rpx;\r\n\t\t\tbackground-color: rgba(255, 255, 255, 0.9);\r\n\t\t\tborder-radius: 50%;\r\n\t\t\tmargin-bottom: 15rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: center;\r\n\t\t\tborder: 1px solid #ccc;\r\n\t\t}\r\n\t}\r\n}\n</style>\n","import MiniProgramPage from 'E:/study/2024study/uniapp/uniappV3Project06/pages/requestDomo02/requestDomo05.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","onReachBottom","onPullDownRefresh"],"mappings":";;;;;AAuBA,UAAM,OAAOA,cAAG,IAAC,EAAE;AAGnB,UAAM,YAAY,SAAU,OAAM;AACjC,UAAI,OAAO,KAAK,MAAM,IAAI,UAAM,KAAK,GAAG;AACxCC,oBAAAA,MAAI,aAAa;AAAA,QAChB,SAAQ;AAAA,QACR;AAAA,MACF,CAAE;AAAA,IACF;AAEA,UAAM,YAAY,WAAU;AAC3BA,oBAAAA,MAAI,qBAAsB;AAC1B,cAAS;AAAA,IACV;AAGA,UAAM,QAAQ,WAAU;AACvBA,oBAAAA,MAAI,aAAa;AAAA,QAChB,WAAU;AAAA,QACV,UAAS;AAAA,MACX,CAAE;AAAA,IACF;AAIA,aAAS,UAAS;AACjBA,oBAAAA,MAAI,yBAA0B;AAC9BA,oBAAAA,MAAI,QAAQ;AAAA,QACX,KAAI;AAAA,QACJ,MAAK;AAAA,UACJ,OAAM;AAAA,QACN;AAAA,MACH,CAAE,EAAE,KAAK,SAAK;AACZA,sBAAA,MAAA,MAAA,OAAA,+CAAY,IAAI,IAAI;AACpB,aAAK,QAAQ,CAAC,GAAG,KAAK,OAAM,GAAG,IAAI,IAAI;AAAA,MACzC,CAAE,EAAE,MAAM,SAAK;AACbA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAM;AAAA,UACN,MAAK;AAAA,QACR,CAAG;AAAA,MACH,CAAE,EAAE,QAAQ,MAAI;AACdA,sBAAAA,MAAI,yBAA0B;AAC9BA,sBAAAA,MAAI,oBAAqB;AAAA,MAC3B,CAAE;AAAA,IACF;AAEAC,kBAAAA,cAAc,MAAI;AACjB,cAAS;AAAA,IACV,CAAC;AAGDC,kBAAAA,kBAAkB,MAAI;AACrB,cAAS;AAAA,IACV,CAAC;AAED,aAAS,UAAS;AACjB,WAAK,QAAM,CAAE;AACb,cAAS;AAAA,IACV;AAEA,YAAS;;;;;;;;;;;;;;;;;;;ACnFT,GAAG,WAAW,eAAe;"}